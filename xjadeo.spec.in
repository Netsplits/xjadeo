# xjadeo.spec
#
# Copyright (C) 2005, 2006 GPL
#  Luis Garrido <luisgarrido@users.sourceforge.net>
#  Robin Gareus <robin@gareus.org>
#
%define name xjadeo
%define version @VERSION@
%define release 3
%define manifest %{_builddir}/%{name}-%{version}-%{release}.manifest

# required items
Name: %{name}
Version: %{version}
Release: %{release}
License: GPL
Group: Application/Multimedia

# optional items
#Vendor: rgareus 
#Distribution:
#Icon:
#URL:
Packager: Luis Garrido luisgarrido@users.sourceforge.net

# source + patches
Source: %{name}-%{version}.tar.gz
#Source1:
#Patch:
#Patch1:

# RPM info
Provides: xjadeo 
Requires: ffmpeg >= 0.4.9, imlib >= 1:1.9, jack-audio-connection-kit >= 0.99
#Conflicts:
#Prereq:

Prefix: /usr
BuildRoot: /var/tmp/%{name}-%{version}

Summary: jack video monitor

%description
jack video monitor
@configure_input@
xjadeo is a very simple video player that gets sync from jack.
When a jack-client (like Muse, Rosegarden or Ardour) acts as a timebase master, xjadeo will display the video frame in sync with jack transport.
%prep
%setup -q
#%patch0 -p1

%build
%configure
make

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT
%makeinstall

# __os_install_post is implicitly expanded after the
# install section... do it now, and then disable it,
# so all work is done before building manifest.

%{?__os_install_post}
%define __os_install_post %{nil}

# build the file list automagically into %{manifest}

cd $RPM_BUILD_ROOT
rm -f %{manifest}
find . -type d \
        | sed '1,2d;s,^\.,\%attr(-\,root\,root) \%dir ,' >> %{manifest}
find . -type f \
        | sed 's,^\.,\%attr(-\,root\,root) ,' >> %{manifest}
find . -type l \
        | sed 's,^\.,\%attr(-\,root\,root) ,' >> %{manifest}

#%pre
#%post
#%preun
#%postun

%clean
rm -f %{manifest}
rm -rf $RPM_BUILD_ROOT

%files -f %{manifest}
%defattr(-,root,root)
%doc README
%doc NEWS
%doc AUTHORS
%doc INSTALL
%doc COPYING
%doc TODO
#%docdir
#%config

%changelog
* Thu Nov 3 2005 Luis Garrido <luisgarrido@users.sourceforge.net>
- First draft of the spec file for version 0.1.1.

